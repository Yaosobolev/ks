<HTML>

	<TITLE>Глава 7. Протоколы стека TCP/IP, используемые для работы служб поставщиков услуг Интернета</TITLE>

<HEAD>

	<link href="../css/style.css" rel="stylesheet" type="text/css">

</HEAD>

<BODY>

	<p class="main-title">7 Протоколы стека TCP/IP, используемые для работы служб поставщиков услуг Интернета</p>
	<a name="ch1"></a>
    <p class="title">7.1 Обзор протоколов TCP/IP</p>

	<p>Сегодня клиенты ISP используют мобильные телефоны как телевизоры, ПК - как телефоны, а телевизоры - как интерактивные игровые станции с множеством различных возможностей для досуга. С развитием сетевых сервисов поставщики услуг Интернета вынуждены учитывать меняющиеся интересы клиентов. Конвергентные IP-сети позволяют предоставлять все сервисы по одной общей сети.</p>
	<p>Чтобы осуществлять поддержку нескольких пользовательских приложений, использующих TCP/IP для доставки данных, сотрудники ISP должны быть знакомы с принципами работы протоколов TCP/IP.</p>
	<p>Серверы ISP должны поддерживать несколько приложений, используемых различными клиентами. Для этого приложения должны использовать функции, предоставляемые двумя транспортными протоколами TCP/IP: TCP и UDP. Размещаемые приложения, используемые совместно, такие как веб-серверы и серверы электронной почты, также зависят от базовых протоколов TCP/IP в свете надежной доставки данных. Кроме того, все IP-сервисы опираются на использование серверов доменных имен, размещаемых у ISP, для привязки IP-адресации и URL-адресов, используемых пользователями для доступа к сервисам [11].</p>

	<center><img src="./img/chapter7/7.1.jpg"></center>
	<p class="img">Рисунок 7.1 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 1</p>
	<center><img src="./img/chapter7/7.2.jpg"></center>
	<p class="img">Рисунок 7.2 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 2</p>
	<center><img src="./img/chapter7/7.3.jpg"></center>
	<p class="img">Рисунок 7.3 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 3</p>
	<center><img src="./img/chapter7/7.4.jpg"></center>
	<p class="img">Рисунок 7.4 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 4</p>
	<center><img src="./img/chapter7/7.5.jpg"></center>
	<p class="img">Рисунок 7.5 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 5</p>
	<center><img src="./img/chapter7/7.6.jpg"></center>
	<p class="img">Рисунок 7.6 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 6</p>
	<center><img src="./img/chapter7/7.7.jpg"></center>
	<p class="img">Рисунок 7.7 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 7</p>
	<center><img src="./img/chapter7/7.8.jpg"></center>
	<p class="img">Рисунок 7.8 &ndash; Демонстрация служб служб поставщиков услуг Интернета (ISP) в действии. Часть 8</p>
   
	<p>Клиенты и серверы осуществляют обмен информацией посредством определенных протоколов и стандартов IP. Протоколы TCP/IP могут быть представлены в виде четырехуровневой модели. Многие из основных сервисов, предоставляемых клиентам ISP, зависят от протоколов прикладного и транспортного уровней модели TCP/IP.</p>
	<p>1 Протоколы прикладного уровня. Протоколы прикладного уровня определяют форматы и управляющие данные, необходимые для большинства распространенных функций обмена данными через Интернет. К подобным протоколам TCP/IP относятся:</p>
	<ul type="square">
		<li>служба доменных имен (DNS) (система, которая назначает имя узла или URL IP-адреса) - используется для преобразования имен Интернет-ресурсов в IP-адреса; </li>
		<li>протокол передачи гипертекста (HTTP) - используется для передачи веб-страниц из Интернета;</li>
		<li>упрощенный протокол передачи почты (SMTP) – используется для передачи почтовых сообщений и вложений;</li>
		<li>Telnet - протокол эмуляции терминала, используется для предоставления удаленного доступа к серверам и сетевым устройствам;</li>
		<li>протокол передачи файлов (FTP) - используется для интерактивного обмена файлами между системами.</li>
	</ul>
	<p>2 Протоколы транспортного уровня. К различным типам данных могут предъявляться особые требования. Для некоторых приложений необходимо, чтобы сегменты передаваемых данных поступали в строго определенной последовательности, в которой они могут быть успешно обработаны. В других случаях для использования данных сначала необходимо принять их полностью. Иногда для приложения может быть допустима потеря незначительной части данных во время передачи по сети.</p>
	<p>В сегодняшних конвергентных сетях приложения с существенно различными требованиями к транспортному протоколу могут обмениваться данными в одной сети. Для различных протоколов транспортного уровня предусмотрены специальные правила, позволяющие устройствам учитывать различные требования к обработке данных.</p>
	<p>Кроме того, многообразие приложений, обменивающихся данными по сети, изолировано от нижних уровней сети, задача которых – доставлять данные устройствам. Задача доставки данных требуемому приложению возложена на транспортный уровень [8].</p>
	<p>Два основных протокола транспортного уровня - TCP и UDP.</p>

	<center><img src="./img/chapter7/7.9.jpg"></center>
	<p class="img">Рисунок 7.9 &ndash; Стек TCP/IP</p>

	<p>Далее представлены функции протоколов различных уровней стека TCP/IP.</p>
	<p>1 Прикладной уровень:</p>
	<ul type="square">
		<li>DNS - система (или служба) доменных имен. Преобразует имена доменов, например cisco.com, в IP-адреса;</li>
		<li>BOOTP - протокол загрузки. Позволяет бездисковым рабочим станциям обнаруживать свой собственный IP-адрес, IP-адреса BOOTP-сервера в сети и загружать файл в память для запуска компьютера. BOOTP замещается протоколом DHCP;</li>
		<li>DHCP - протокол динамической конфигурации сетевого узла. При запуске динамически назначает IP-адреса клиентским станциям. Позволяет повторно использовать адреса, которые больше не нужны;</li>
		<li>SMTP - простой протокол передачи почты. Предназначен для отправки электронной почты клиентом на сервер электронной почты. Позволяет серверу отправлять электронную почту на другие сервера;</li>
		<li>POP - протокол почтового офиса версии 3. Предназначен для получения электронной почты клиентом с сервера электронной почты. При этом происходит загрузка электронной почты с сервера на настольный компьютер;</li>
		<li>IMAP - протокол доступа к сообщениям в Интернете. Предназначен для доступа клиента к электронной почте, расположенной на сервере электронной почты. Позволяет управлять электронной почтой на сервере;</li>
		<li>FTP - протокол передачи файлов. Задает правила, которые позволяют пользователю на одном узле получить доступ к узлу в другой сети и передать ему файлы. Надежный, ориентированный на подключение протокол доставки файлов с подтверждением;</li>
		<li>TFTP - простейший протокол передачи данных без установления подключения. Оптимальный протокол доставки файлов без подтверждения. Создает меньшую нагрузку;</li>
		<li>HTTP - протокол передачи гипертекста. Задает правила обмена в Интернете текстом, графическими изображениями, звуковыми, видео и другими файлами мультимедиа.</li>
	</ul>
	<p>2 Транспортный уровень:</p>
	<ul type="square">
		<li>UDP - протокол передачи датаграмм пользователя. Позволяет процессу на одном узле отправлять пакеты процессу на другом узле. Не подтверждает успешную передачу датаграмм;</li>
		<li>TCP - протокол управления передачей (TCP). Обеспечивает надежную связь между процессами, запущенными на разных узлах. Надежные передачи с подтверждением успешной доставки [15].</li>
	</ul>
	<p>3 Межсетевой уровень:</p>
	<ul type="square">
		<li>IP - межсетевой протокол (IP). Принимает сегменты сообщений с транспортного уровня. Формирует пакеты из сообщений. Передает пакеты для сквозной доставки через объединенную сеть;</li>
		<li>NAT - преобразование сетевых адресов. Преобразует IP-адреса частной сети в глобальные уникальные публичные IP-адреса;</li>
		<li>ARP - протокол разрешения адресов (ARP). Обеспечивает динамическое сопоставление между IP-адресами и аппаратными адресами;</li>
		<li>ICMP - протокол управляющих сообщений в Интернете (ICMP). Обеспечивает обратную связь от узла назначения к исходному узлу, чтобы сообщать об ошибках доставки пакетов;</li>
		<li>RIP - протокол маршрутизации с вектором расстояний. Метрика, основанная на числе переходов. Версия 2 поддерживает технологии VLSM и  CIDR;</li>
		<li>OSPF - протокол маршрутизации по состоянию канала. Иерархическая структура, основанная на областях. Внутренний протокол маршрутизации на основе открытых стандартов;</li>
		<li>EIGRP - cобственный протокол маршрутизации Cisco. Использует составную метрику, основанную на пропускной способности, задержке, нагрузке, надежности и MTU;</li>
		<li>BGP - Последняя версия – BGP4. Внешний протокол маршутизации, используемый между поставщиками услуг Интернета. Маршрутизация между автономными системами.</li>
	</ul>
	<p>4 Уровень доступа:</p>
	<ul type="square">
		<li>PPP - Протокол точка-точка (PPP). Предоставляет средства инкапсуляции пакетов для передачи через последовательный канал;></li>
		<li>Ethernet - Определяет правила стандартов прокладки соединений и обмена сигналами на уровне сетевого доступа;</li>
	</ul>
	<p>Драйвер интерфейсов - предоставляет компьютеру инструкции для управления конкретным интерфейсом на сетевом уровне [10].</p>

	<center><img src="./img/chapter7/7.10.jpg"></center>
	<p class="img">Рисунок 7.10 &ndash; Стек TCP/IP. Прикладной уровень. Система DNS</p>
	<center><img src="./img/chapter7/7.11.jpg"></center>
	<p class="img">Рисунок 7.11 &ndash; Стек TCP/IP. Прикладной уровень. Протокол BOOTP</p>
	<center><img src="./img/chapter7/7.12.jpg"></center>
	<p class="img">Рисунок 7.12 &ndash; Стек TCP/IP. Прикладной уровень. Протокол DHCP</p>
	<center><img src="./img/chapter7/7.13.jpg"></center>
	<p class="img">Рисунок 7.13 &ndash; Стек TCP/IP. Прикладной уровень. Протокол SMTP</p>
	<center><img src="./img/chapter7/7.14.jpg"></center>
	<p class="img">Рисунок 7.14 &ndash; Стек TCP/IP. Прикладной уровень. Протокол POP</p>
	<center><img src="./img/chapter7/7.15.jpg"></center>
	<p class="img">Рисунок 7.15 &ndash; Стек TCP/IP. Прикладной уровень. Протокол IMAP</p>
	<center><img src="./img/chapter7/7.16.jpg"></center>
	<p class="img">Рисунок 7.16 &ndash; Стек TCP/IP. Прикладной уровень. Протокол FTP</p>
	<center><img src="./img/chapter7/7.17.jpg"></center>
	<p class="img">Рисунок 7.17 &ndash; Стек TCP/IP. Прикладной уровень. Протокол TFTP</p>
	<center><img src="./img/chapter7/7.18.jpg"></center>
	<p class="img">Рисунок 7.18 &ndash; Стек TCP/IP. Прикладной уровень. Протокол HTTP</p>
	<center><img src="./img/chapter7/7.19.jpg"></center>
	<p class="img">Рисунок 7.19 &ndash; Стек TCP/IP. Транспортный уровень. Протокол UDP</p>
	<center><img src="./img/chapter7/7.20.jpg"></center>
	<p class="img">Рисунок 7.20 &ndash; Стек TCP/IP. Транспортный уровень. Протокол TCP</p>
	<center><img src="./img/chapter7/7.21.jpg"></center>
	<p class="img">Рисунок 7.21 &ndash; Стек TCP/IP. Межсетевой уровень. Протокол IP</p>
	<center><img src="./img/chapter7/7.22.jpg"></center>
	<p class="img">Рисунок 7.22 &ndash; Стек TCP/IP. Межсетевой уровень. NAT</p>
	<center><img src="./img/chapter7/7.23.jpg"></center>
	<p class="img">Рисунок 7.23 &ndash; Стек TCP/IP. Межсетевой уровень. Протокол ARP</p>
	<center><img src="./img/chapter7/7.24.jpg"></center>
	<p class="img">Рисунок 7.24 &ndash; Стек TCP/IP. Межсетевой уровень. Протокол ICMP</p>
	<center><img src="./img/chapter7/7.25.jpg"></center>
	<p class="img">Рисунок 7.25 &ndash; Стек TCP/IP. Межсетевой уровень. Протокол RIP</p>
	<center><img src="./img/chapter7/7.26.jpg"></center>
	<p class="img">Рисунок 7.26 &ndash; Стек TCP/IP. Межсетевой уровень. Протокол OSPF</p>
	<center><img src="./img/chapter7/7.27.jpg"></center>
	<p class="img">Рисунок 7.27 &ndash; Стек TCP/IP. Межсетевой уровень. Протокол EIGRP</p>
	<center><img src="./img/chapter7/7.28.jpg"></center>
	<p class="img">Рисунок 7.28 &ndash; Стек TCP/IP. Межсетевой уровень. Протокол BGP</p>
	<center><img src="./img/chapter7/7.29.jpg"></center>
	<p class="img">Рисунок 7.29 &ndash; Стек TCP/IP. Уровень доступа. Протокол PPP</p>
	<center><img src="./img/chapter7/7.30.jpg"></center>
	<p class="img">Рисунок 7.30 &ndash; Стек TCP/IP. Уровень доступа. Протокол Ethernet</p>
	<center><img src="./img/chapter7/7.31.jpg"></center>
	<p class="img">Рисунок 7.31 &ndash; Стек TCP/IP. Уровень доступа. Драйверы интерфейсов</p>


    <a name="ch2"></a>
	<p class="title">7.2 Протоколы транспортного уровня</p>
    <a name="ch2.1"></a>
	<p class="title">7.2.1 Функции транспортного уровня</p>

	<p>Различные приложения имеют разные потребности. На транспортном уровне существует два протокола TCP/IP: TCP и UDP.</p>
	<p>1 TCP. TCP - надежный протокол с гарантированной доставкой. В TCP определены методы, используемые узлами для подтверждения получения пакетов, и требуется, чтобы исходный узел повторно отправлял пакеты, получение которых не было подтверждено. Протоколы TCP также предусматривают механизм обмена сообщениями между узлом-отправителем и узлом-получателем для установления сеанса связи. TCP принято сравнивать со сквозным каналом или постоянным соединением (способ соединения, при котором одно HTTP-соединение используется для отправки и приема нескольких запросов и откликов HTTP. Например, при обращении пользователя к веб-сайту браузер может в одном соединении загрузить файл index.html со всеми изображениями и кнопками, на которые в нем имеются ссылки. Постоянное соединение добавлено в версии HTTP 1.1) между узлами. Таким образом, TCP является протоколом с установлением соединения (метод передачи данных или протокол, который требует установления виртуального канала).</p>
	<p>TCP связан с некоторыми накладными расходами на учет отдельных сеансов связи между всеми парами узлов и на обработку подтверждений и запросов повторной передачи. В ряде случаев задержки, обусловленные этими накладными расходами, неприемлемы для приложений. Для таких приложений более подходящим является протокол UDP.</p>
	<p>2 UDP. UDP – очень простой, без установления соединения (метод передачи данных или протокол, не требующий обмена сообщениями и предварительного согласования соединения между источником и адресатом), протокол. Его преимуществом является доставка данных с низкими накладными расходами. UDP является протоколом транспортного уровня с негарантированной доставкой, так как он не обеспечивает проверку ошибок и не позволяет гарантированно обеспечить доставку или управление трафиком. Поскольку UDP – протокол транспортного уровня с негарантированной доставкой, датаграммы UDP могут поступать к получателю в произвольном порядке или полностью теряться. Приложения, использующие протокол UDP, допускают потерю части данных. Примером UDP-приложения являются радиотрансляции через Интернет. Потерянный фрагмент данных только незначительно отразится на качестве широковещательной рассылки (1 – пакет данных, который рассылается всем узлам в сети. 2 – способ рассылки пакетов данных всем устройствам в сети. Широковещательная рассылка идентифицируется адресом широковещательной рассылки в другие сети) [12].</p>

	<center><img src="./img/chapter7/7.32.jpg"></center>
	<p class="img">Рисунок 7.32 &ndash; Протоколы транспортного уровня стека TCP/IP</p>

	<p>В таких приложениях, как базы данных, веб-обозреватели и программы для электронной почты, доставляемые данные могут быть полезны, только если они доставлены получателю в своем исходном состоянии. Результатом потери части данных станут поврежденные или нечитаемые сообщения. При разработке этих приложений выбирается надежный протокол транспортного уровня. Дополнительная нагрузка на сеть, обусловленная реализацией требований надежности, считается приемлемой в интересах обеспечения устойчивой связи.</p>
	<p>Протокол выбирается в зависимости от характера данных, которые пересылает приложение. Например, для сообщений электронной почты требуется подтверждение доставки, и потому используется протокол TCP. Клиент электронной почты отправляет сообщение по протоколу SMTP в виде потока байт (единица измерения размера файлов данных, пространства на дисках и других носителях, а также объема данных, пересылаемых по сети. Один байт состоит из восьми битов) до транспортного уровня. На транспортном уровне функции TCP делят поток на сегменты.</p>
	<p>Байты (октеты) в каждом сегменте получают уникальные порядковые номера. Сегменты поступают на уровень межсетевого протокола (IP), где каждый сегмент помещается в пакет для передачи. Этот процесс называется инкапсуляцией. Со стороны получателя обработка происходит в обратном порядке: пакеты деинкапсулируются, вложенные в них сегменты передаются процессу TCP, который восстанавливает из сегментов поток байт, передавая его приложению – серверу электронной почты.</p>

	<center><img src="./img/chapter7/7.33.jpg"></center>
	<p class="img">Рисунок 7.33 &ndash; Инкапсуляция TCP/IP. Часть 1</p>
	<center><img src="./img/chapter7/7.34.jpg"></center>
	<p class="img">Рисунок 7.34 &ndash; Инкапсуляция TCP/IP. Часть 2</p>
	<center><img src="./img/chapter7/7.35.jpg"></center>
	<p class="img">Рисунок 7.35 &ndash; Инкапсуляция TCP/IP. Часть 3</p>
	<center><img src="./img/chapter7/7.36.jpg"></center>
	<p class="img">Рисунок 7.36 &ndash; Инкапсуляция TCP/IP. Часть 4</p>
	<center><img src="./img/chapter7/7.37.jpg"></center>
	<p class="img">Рисунок 7.37 &ndash; Инкапсуляция TCP/IP. Часть 5</p>
	<center><img src="./img/chapter7/7.38.jpg"></center>
	<p class="img">Рисунок 7.38 &ndash; Инкапсуляция TCP/IP. Часть 6</p>
	<center><img src="./img/chapter7/7.39.jpg"></center>
	<p class="img">Рисунок 7.39 &ndash; Инкапсуляция TCP/IP. Часть 7</p>
	<center><img src="./img/chapter7/7.40.jpg"></center>
	<p class="img">Рисунок 7.40 &ndash; Инкапсуляция TCP/IP. Часть 8</p>
	<center><img src="./img/chapter7/7.41.jpg"></center>
	<p class="img">Рисунок 7.41 &ndash; Инкапсуляция TCP/IP. Часть 9</p>
	<center><img src="./img/chapter7/7.42.jpg"></center>
	<p class="img">Рисунок 7.42 &ndash; Инкапсуляция TCP/IP. Часть 10</p>
	<center><img src="./img/chapter7/7.43.jpg"></center>
	<p class="img">Рисунок 7.43 &ndash; Инкапсуляция TCP/IP. Часть 11</p>
	<center><img src="./img/chapter7/7.44.jpg"></center>
	<p class="img">Рисунок 7.44 &ndash; Инкапсуляция TCP/IP. Часть 12</p>
	<center><img src="./img/chapter7/7.45.jpg"></center>
	<p class="img">Рисунок 7.45 &ndash; Инкапсуляция TCP/IP. Часть 13</p>


    <a name="ch2.2"></a>
	<p class="title">7.2.2 Протокол TCP</p>

	<p>Прежде чем использовать TCP-соединение для обмена данными, два узла должны установить сеанс путем обмена сообщениями. Этот процесс происходит в три этапа.</p>
	<p>На первом этапе узел-отправитель отправляет специальное сообщение SYN, которое открывает процесс установления сеанса TCP. Это сообщение служит двум целям:</p>
	<ul type="square">
		<li>указывает, что узел-отправитель намерен установить сеанс с узлом-получателем для отправки данных;</li>
		<li>синхронизирует порядковые номера TCP между двумя узлами для того, чтобы каждый узел мог следить за отправляемыми и получаемыми фрагментами во время сеанса связи.</li>
	</ul>
	<p>На втором этапе узел-получатель в ответ на сообщение SYN отправляет подтверждение синхронизации - сообщение SYN-ACK.</p>
	<p>На последнем этапе, узел-отправитель получает SYN-ACK и возвращает сообщение ACK (подтверждение. 1 – Символ управления передачей (или кадр передачи), подтверждающий прием данных без подтверждений и ошибок или готовность принимающей станции к получению новых сообщений, 2 – в протоколе TCP ACK используется в начальном трехэтапном согласовании для подтверждения порядкового номера передающей станции. Подтверждение известно также под названием квитирование), завершая установление сеанса. После этого сегменты данных могут передаваться обычным образом.</p>
	<p>Этот обмен сообщениями SYN, SYN-ACK и ACK между процессами TCP называется трехэтапным согласованием (процесс установления сеанса TCP между двумя оконечными устройствами. Трехэтапное согласование – это последовательность синхронизации и подтверждений, используемая протоколом TCP для открытия соединения. Клиент отправляет сегмент с флагом SYN. Сервер отвечает посредством SYN-ACK. Клиент отсылает обратно ACK, также известный как SYN-ACK-ACK, и сеанс установлен) [8].</p>

	<center><img src="./img/chapter7/7.46.jpg"></center>
	<p class="img">Рисунок 7.46 &ndash; Процесс установки TCP-соединения. Часть 1</p>
	<center><img src="./img/chapter7/7.47.jpg"></center>
	<p class="img">Рисунок 7.47 &ndash; Процесс установки TCP-соединения. Часть 2</p>
	<center><img src="./img/chapter7/7.48.jpg"></center>
	<p class="img">Рисунок 7.48 &ndash; Процесс установки TCP-соединения. Часть 3</p>
	<center><img src="./img/chapter7/7.49.jpg"></center>
	<p class="img">Рисунок 7.49 &ndash; Процесс установки TCP-соединения. Часть 4</p>
	<center><img src="./img/chapter7/7.50.jpg"></center>
	<p class="img">Рисунок 7.50 &ndash; Процесс установки TCP-соединения. Часть 5</p>
	<center><img src="./img/chapter7/7.51.jpg"></center>
	<p class="img">Рисунок 7.51 &ndash; Процесс установки TCP-соединения. Часть 6</p>
	<center><img src="./img/chapter7/7.52.jpg"></center>
	<p class="img">Рисунок 7.52 &ndash; Процесс установки TCP-соединения. Часть 7</p>


	<p>Когда узел отправляет сегменты сообщения узлу-получателю по протоколу TCP, процесс TCP на исходном узле запускает таймер. Таймер отсчитывает достаточное время для доставки сообщения узлу-получателю и получения подтверждения. Если за выделенное время узел-отправитель не получил подтверждения от адресата, срабатывает таймер, и источник считает сообщение утерянным. После этого часть сообщения, получение которой не было подтверждено, отправляется повторно.</p>
	<p>В дополнение к механизмам подтверждения и повторной отправки протокол TCP также предусматривает процедуру повторной сборки сообщений на узле-получателе. Каждый сегмент TCP содержит порядковый номер. На узле-получателе процесс TCP хранит полученные сегменты в буфере TCP. Анализируя порядковые номера сегментов, процесс TCP следит за отсутствием разрывов в получаемых данных. Если данные поступают в искаженном порядке, процесс TCP может переупорядочить фрагменты в случае необходимости.</p>

	<center><img src="./img/chapter7/7.53.jpg"></center>
	<p class="img">Рисунок 7.53 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 1</p>
	<center><img src="./img/chapter7/7.54.jpg"></center>
	<p class="img">Рисунок 7.54 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 2</p>
	<center><img src="./img/chapter7/7.55.jpg"></center>
	<p class="img">Рисунок 7.55 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 3</p>
	<center><img src="./img/chapter7/7.56.jpg"></center>
	<p class="img">Рисунок 7.56 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 4</p>
	<center><img src="./img/chapter7/7.57.jpg"></center>
	<p class="img">Рисунок 7.57 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 5</p>
	<center><img src="./img/chapter7/7.58.jpg"></center>
	<p class="img">Рисунок 7.58 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 6</p>
	<center><img src="./img/chapter7/7.59.jpg"></center>
	<p class="img">Рисунок 7.59 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 7</p>
	<center><img src="./img/chapter7/7.60.jpg"></center>
	<p class="img">Рисунок 7.60 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 8</p>
	<center><img src="./img/chapter7/7.61.jpg"></center>
	<p class="img">Рисунок 7.61 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 9</p>
	<center><img src="./img/chapter7/7.62.jpg"></center>
	<p class="img">Рисунок 7.62 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 10</p>
	<center><img src="./img/chapter7/7.63.jpg"></center>
	<p class="img">Рисунок 7.63 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 11</p>
	<center><img src="./img/chapter7/7.64.jpg"></center>
	<p class="img">Рисунок 7.64 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 12</p>
	<center><img src="./img/chapter7/7.65.jpg"></center>
	<p class="img">Рисунок 7.65 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 13</p>
	<center><img src="./img/chapter7/7.66.jpg"></center>
	<p class="img">Рисунок 7.66 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 14</p>
	<center><img src="./img/chapter7/7.67.jpg"></center>
	<p class="img">Рисунок 7.67 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 15</p>
	<center><img src="./img/chapter7/7.68.jpg"></center>
	<p class="img">Рисунок 7.68 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 16</p>
	<center><img src="./img/chapter7/7.69.jpg"></center>
	<p class="img">Рисунок 7.69 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 17</p>
	<center><img src="./img/chapter7/7.70.jpg"></center>
	<p class="img">Рисунок 7.70 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 18</p>
	<center><img src="./img/chapter7/7.71.jpg"></center>
	<p class="img">Рисунок 7.71 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 19</p>
	<center><img src="./img/chapter7/7.72.jpg"></center>
	<p class="img">Рисунок 7.72 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 20</p>
	<center><img src="./img/chapter7/7.73.jpg"></center>
	<p class="img">Рисунок 7.73 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 21</p>
	<center><img src="./img/chapter7/7.74.jpg"></center>
	<p class="img">Рисунок 7.74 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 22</p>
	<center><img src="./img/chapter7/7.75.jpg"></center>
	<p class="img">Рисунок 7.75 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 23</p>
	<center><img src="./img/chapter7/7.76.jpg"></center>
	<p class="img">Рисунок 7.76 &ndash; Процесс подтверждения и повторной передачи операции TCP. Часть 24</p>


    <a name="ch2.3"></a>
	<p class="title">7.2.3 Протокол UDP</p>

	<p>UDP - очень простой протокол. Поскольку в UDP отсутствует понятие соединения и не предусмотрены сложные механизмы повторной отправки, упорядочивания и квитирования, свойственные TCP, протокол UDP характеризуется существенно меньшими накладными расходами.</p>
	<p>UDP  часто называют ненадежным протоколом доставки, поскольку он не дает гарантии получения сообщения узлом-получателем. Из этого не следует, что приложения, использующие UDP, ненадежны. Это лишь означает, что функции обеспечения надежности не реализуются протоколом транспортного уровня и должны быть реализованы на других уровнях, где они требуются.</p>
	<p>Несмотря на то, что UDP-трафик обычно составляет небольшую долю трафика в сети, UDP используется следующими важными протоколами прикладного уровня:</p>
	<ul type="square">
		<li>служба доменных имен (DNS);</li>
		<li>упрощенный протокол управления сетью (SNMP);</li>
		<li>протокол динамической настройки узла (DHCP);</li>
		<li>протокол маршрутной информации (RIP);</li>
		<li>упрощенный протокол передачи файлов (TFTP);</li>
		<li>онлайн-игры.</li>
	</ul>

	<center><img src="./img/chapter7/7.77.jpg"></center>
	<p class="img">Рисунок 7.77 &ndash; Работа протокола UDP</p>

	<p>Основная разница между протоколами TCP и UDP состоит в наборе функций, который содержит каждый из протоколов, а также в количестве накладных расходов при передаче данных. Просмотр заголовков пакетов каждого из протоколов - простейший способ изучения разницы между ними.</p>
	<p>Каждый сегмент данных TCP содержит 20 дополнительных байт в заголовке пакета, в которой инкапсулированы данные уровня приложений. Это приводит к дополнительным накладным расходам, которые необходимы для поддержки механизма защиты от ошибок при передаче данных, который встроен в протокол TCP.</p>
	<p>Фрагменты данных в протоколе UDP называются датаграммами. Данные датаграммы отправляются без каких-либо гарантий на доставку, что требует только 8 дополнительных байтов в заголовке [13].</p>

	<center><img src="./img/chapter7/7.78.jpg"></center>
	<p class="img">Рисунок 7.78 &ndash; Отличия заголовков протоколов TCP и UDP</p>


    <a name="ch2.4"></a>
	<p class="title">7.2.4 Поддержка нескольких сетевых служб</p>

	<p>Задача управления несколькими одновременными процессами пересылки данных решается на транспортном уровне. Сетевые службы TCP и UDP следят за различными приложениями, обменивающимися данными через сеть. Чтобы иметь возможность различать сегменты и датаграммы отдельных приложений, в протоколах TCP и UDP предусмотрены поля заголовка, однозначно идентифицирующие приложения в ходе обмена данными.</p>
	<p>В заголовке каждого сегмента или датаграммы указываются порты источника и адресата. Номера порта присваиваются различными способами в зависимости от того, является ли сообщение запросом или откликом. Когда приложение-клиент посылает запрос приложению-серверу, порт адресата в заголовке представляет собой номер порта, используемого приложением на сервере. Например, веб-обозреватель при обращении к веб-серверу использует протокол TCP и номер порта 80, поскольку порт TCP 80 по умолчанию выделен для веб-серверов. Многим распространенным приложениям присвоены номера портов по умолчанию. Серверы электронной почты, использующие протокол SMTP, обычно используют TCP-порт 25.</p>
	<p>По мере поступления сегментов для определенного порта протокол TCP или UDP помещает эти сегменты в соответствующую очередь. Например, приложение выполняет запрос по протоколу HTTP, процесс TCP на веб-сервере помещает поступающие сегменты в очередь веб-сервера (1 – под очередью обычно понимается упорядоченный список элементов, ожидающих обработки, 2 – в маршрутизации очередь представляет собой накопленную последовательность пакетов, ожидающих пересылки через интерфейс маршрутизатора). Затем эти сегменты передаются HTTP-приложению с той скоростью, с которой приложение успевает их принимать.</p>
	<p>Сегменты, в которых указан порт 25, будут помещены в отдельную очередь для сервера электронной почты. Так протоколы транспортного уровня позволяют размещать серверам ISP несколько различных приложений и сетевых служб.</p>

	<center><img src="./img/chapter7/7.79.jpg"></center>
	<p class="img">Рисунок 7.79 &ndash; Поддержка протоколом TCP нескольких сетевых служб</p>

	<p>В любой операции через Интернет участвуют узел-отправитель и узел-получатель, которыми обычно являются клиент и сервер. Процессы TCP на отправляющем и принимающем узлах несколько различаются. Клиенты – активная сторона: они запрашивают подключения; серверы – пассивная сторона: они ожидают и принимают подключения.</p>
	<p>Процессам серверов обычно статически назначаются известные номера портов от 0 до 1023. Известные номера портов позволяют клиентским приложениям правильно выбирать порт адресата при обращении к сетевой службе.</p>
	<p>Клиентам также необходимы номера порта, однозначно идентифицирующие приложение - источник запроса. Номера портов источников динамически назначаются из диапазона 1024 – 65535. Такие порты играют роль обратного адреса запрашивающего приложения. Протоколы транспортного уровня отслеживают порт и приложение - источник запроса, чтобы отклик мог быть возвращен соответствующему приложению.</p>

	<center><img src="./img/chapter7/7.80.jpg"></center>
	<p class="img">Рисунок 7.80 &ndash; Порты UDP и TCP</p>
	<center><img src="./img/chapter7/7.81.jpg"></center>
	<p class="img">Рисунок 7.81 &ndash; Порты транспортного уровня</p>


	<p>Совокупность номера порта на транспортном уровне и IP-адреса узла на сетевом уровне однозначно идентифицирует конкретный процесс приложения на конкретном физическом узле. Эта совокупность параметров называется сокетом (конечная точка соединения, уникальная для отдельного процесса приложения, работающего на отдельном узловом устройстве. Пара сокетов состоит из IP-адресов источника и адресата номеров портов). Пара сокетов, состоящая из IP-адресов и номеров портов источника и адресата, также уникальна и идентифицирует конкретную операцию обмена данными между двумя узлами.</p>
	<p>Клиентский сокет имеет следующий вид (7151 — номер порта источника): 192.168.1.1:7151</p>
	<p>Сокет веб-сервера может иметь следующий вид: 10.10.10.101:80</p>
	<p>Два сокета образуют пару: 192.168.1.1:7151, 10.10.10.101:80</p>
	<p>В результате создания сокетов становятся известны конечные точки соединения, и данные могут передаваться между приложениями на двух узлах. Сокеты позволяют различать несколько процессов, выполняющихся на клиенте, а также распознавать различные подключения к процессу сервера [13].</p>

	<center><img src="./img/chapter7/7.82.jpg"></center>
	<p class="img">Рисунок 7.82 &ndash; Процесс создания пар сокетов. Часть 1</p>
	<center><img src="./img/chapter7/7.83.jpg"></center>
	<p class="img">Рисунок 7.83 &ndash; Процесс создания пар сокетов. Часть 2</p>
	<center><img src="./img/chapter7/7.84.jpg"></center>
	<p class="img">Рисунок 7.84 &ndash; Процесс создания пар сокетов. Часть 3</p>
	<center><img src="./img/chapter7/7.85.jpg"></center>
	<p class="img">Рисунок 7.85 &ndash; Процесс создания пар сокетов. Часть 4</p>
	<center><img src="./img/chapter7/7.86.jpg"></center>
	<p class="img">Рисунок 7.86 &ndash; Процесс создания пар сокетов. Часть 5</p>
	<center><img src="./img/chapter7/7.87.jpg"></center>
	<p class="img">Рисунок 7.87 &ndash; Процесс создания пар сокетов. Часть 6</p>
	<center><img src="./img/chapter7/7.88.jpg"></center>
	<p class="img">Рисунок 7.88 &ndash; Процесс создания пар сокетов. Часть 7</p>
	<center><img src="./img/chapter7/7.89.jpg"></center>
	<p class="img">Рисунок 7.89 &ndash; Процесс создания пар сокетов. Часть 8</p>
	<center><img src="./img/chapter7/7.90.jpg"></center>
	<p class="img">Рисунок 7.90 &ndash; Процесс создания пар сокетов. Часть 9</p>


    <a name="ch3"></a>
	<p class="title">7.3 Служба доменных имен</p>
    <a name="ch3.1"></a>
	<p class="title">7.3.1 Имя узла TCP/IP</p>

	<p>Для обмена данными между двумя узлами по Интернету необходимо, чтобы каждый узел имел действительный IP-адрес. Однако численные IP-адреса, особенно сотни тысяч адресов серверов, доступных в Интернете, плохо подходят для запоминания человеком. Для использования людьми более практичны доменные имена, такие как cisco.com. В сетях предусмотрены системы именования, которые преобразуют имена ресурсов, пригодные для восприятия людьми, в машиночитаемые IP-адреса, которые могут использоваться для обмена данными по сети.</p>
	<p>Пользователи, часто не подозревая этого, сталкиваются с системами именования ресурсов каждый день, посещая веб-сайты или отправляя сообщения по электронной почте. Системы именования ресурсов работают скрытно от пользователя, но являются неотъемлемой частью сетевой среды. Например, для входа на сайт Cisco Systems, Inc. следует открыть обозреватель и ввести http://www.cisco.com в поле адреса. Адрес www.cisco.com - сетевое имя, связанное с конкретным IP-адресом. Если набрать в обозревателе IP-адрес сервера, откроется та же самая веб-страница.</p>
	<p>Системы именования сетевых ресурсов созданы для удобства пользователей и позволяют не запоминать сложные IP-адреса интересных им ресурсов.</p>

	<center><img src="./img/chapter7/7.91.jpg"></center>
	<p class="img">Рисунок 7.91 &ndash; Имена, соответствующие устройствам. Имя веб-сервера</p>
	<center><img src="./img/chapter7/7.92.jpg"></center>
	<p class="img">Рисунок 7.92 &ndash; Имена, соответствующие устройствам. Имя компьютера с IP-адресом 192.168.1.50</p>
	<center><img src="./img/chapter7/7.93.jpg"></center>
	<p class="img">Рисунок 7.93 &ndash; Имена, соответствующие устройствам. Имя компьютера с IP-адресом 192.168.1.51</p>
	<center><img src="./img/chapter7/7.94.jpg"></center>
	<p class="img">Рисунок 7.94 &ndash; Имена, соответствующие устройствам. Имя сервера с IP-адресом 192.168.1.20</p>
	<center><img src="./img/chapter7/7.95.jpg"></center>
	<p class="img">Рисунок 7.95 &ndash; Имена, соответствующие устройствам. Имя сервера с IP-адресом 192.168.1.21</p>


	<p>На заре Интернета имена узлов и их IP-адреса были собраны в единственном файле HOSTS на сервере с централизованным управлением.</p>
	<p>Центральный файл HOSTS содержал привязку имен узлов к IP-адресам всех устройств, подключенных к Интернету в то время. Каждый пользователь мог загрузить файл HOSTS и использовать его для преобразования имен узлов в сети. При указании имени сетевого узла узел-отправитель обращался к загруженному файлу HOSTS и получал IP-адрес целевого устройства.</p>
	<p>На первых порах файла HOSTS было достаточно для описания ограниченного числа компьютеров, подключенных к Интернету. По мере роста сети стало расти и число узлов, нуждавшихся в преобразовании имен в IP-адреса. Регулярно обновлять файл HOSTS стало невозможно, и в итоге был предложен новый способ преобразования имен узлов в IP-адреса. Служба доменных имен (DNS) была создана специально для преобразования доменных имен в адреса. В DNS используется распределенное множество серверов для преобразования имен, связанных с численными адресами. Единый централизованный файл HOSTS перестал быть необходим.</p>
	<p>Однако файл HOSTS все еще присутствует практически на всех компьютерах. Локальный файл HOSTS создается при установке TCP/IP на физическом узле. В процессе преобразования адреса в имя на компьютере файл HOSTS сканируется даже до обращения к более мощной службе DNS. Локальный файл HOSTS можно использовать для диагностики сбоев и для замены записей, настроенных на DNS-сервере.</p>

	<center><img src="./img/chapter7/7.96.jpg"></center>
	<p class="img">Рисунок 7.96 &ndash; Содержимое файла HOSTS</p>
	<center><img src="./img/chapter7/7.97.jpg"></center>
	<p class="img">Рисунок 7.97 &ndash; Содержимое файла HOSTS. Компонент цитированной документации по работе с файлами HOSTS</p>
	<center><img src="./img/chapter7/7.98.jpg"></center>
	<p class="img">Рисунок 7.98 &ndash; Содержимое файла HOSTS. IP-адрес, сопоставленный именам</p>


    <a name="ch3.2"></a>
	<p class="title">7.3.2 Иерархия DNS</p>

	<p>Служба доменных имен (DNS) представляет собой систему разрешения имен узлов без недостатков, которые были свойственны файлу HOSTS. DNS имеет иерархическую структуру. Распределенная база данных привязок имен узлов к IP-адресам распространяется по множеству DNS-серверов во всем мире. В этом состоит отличие от файла HOSTS, все привязки в котором редактировались централизованно на одном сервере.</p>
	<p>Иерархическая структура DNS строится по именам доменов и подразделяется на небольшие управляемые зоны. У каждого DNS-сервера имеется отдельный файл с базой данных. Сервер управляет привязкой имен к IP-адресам только в небольшой части общей структуры DNS. Получив запрос на преобразование имени, не относящегося к собственной зоне DNS, DNS-сервер пересылает этот запрос на обработку другому DNS-серверу в соответствующей зоне (1 – логическая группа сетевых устройств в Apple Talk, 2 – часть глобального пространства имен DNS).</p>
	<p>Система DNS является масштабируемой службой разрешения имен узлов, которая распределена по множеству серверов сети.</p>

	<center><img src="./img/chapter7/7.99.jpg"></center>
	<p class="img">Рисунок 7.99 &ndash; Алгоритм работы системы разрешения доменных имен</p>

	<p>Система DNS состоит из трех компонентов:</p>
	<p>1 Записи ресурсов и пространство доменных имен. Запись ресурса - это запись в файле базы данных зоны DNS. Она идентифицирует тип узла, IP-адрес узла и параметры базы данных DNS.</p>
	<p>Пространство доменных имен – иерархическая структура именования, используемая при организации записей ресурсов. Пространство доменных имен состоит из различных доменов (групп) и записей ресурсов в каждой группе.</p>
	<p>2 DNS-серверы. Эти серверы отвечают за ведение баз данных, в которых хранятся записи ресурсов и сведения о структуре пространства доменных имен. DNS-серверы начинают обработку запросов клиентов с поиска в пространстве доменных имен и записях ресурсов, хранящихся в файлах базы данных зоны. Если DNS-сервер не находит требуемой информации в базе данных зоны DNS, сервер обращается к дополнительным предопределенным DNS-серверам для обработки запроса преобразования имени в IP-адрес.</p>
	<p>3 Преобразователи. Преобразователь (resolver) – это приложение или функция операционной системы, выполняемая на DNS-клиентах и DNS-серверах. Если в запросе используется доменное имя, преобразователь обращается к DNS-серверу и преобразует это имя в IP-адрес. Преобразователь реализуется на стороне DNS-клиента и служит для создания запроса имени DNS, отсылаемого на DNS-сервер. Преобразователи также размещаются на DNS-серверах. Если DNS-сервер не располагает данными о запрашиваемой привязке имени к IP-адресу, он с помощью преобразователя передает запрос другим DNS-серверам.</p>

	<center><img src="./img/chapter7/7.100.jpg"></center>
	<p class="img">Рисунок 7.100 &ndash; DNS-клиенты и DNS-серверы</p>

	<p>В системе DNS используется иерархическая структура преобразования имен. Эта иерархия выглядит как перевернутое дерево с корнем наверху и ветвями, растущими вниз.</p>
	<p>Во главе иерархии находятся корневые серверы, которые располагают записями, позволяющими обратиться к серверам доменов верхнего уровня, которые в свою очередь содержат записи, указывающие на серверы доменов второго уровня.</p>
	<p>Домены верхнего уровня назначаются для каждой страны, а также на организационной основе. Имена этих доменов должны следовать международному стандарту ISO 3167. Для обозначения стран используются трехбуквенные и двухбуквенные аббревиатуры, а для различных типов организаций - следующие обозначения:</p>
	<ul type="square">
		<li>coм - коммерческие организации (например, microsoft.com);</li>
		<li>edu - образовательные (например, mit.edu);</li>
		<li>gov - правительственные организации (например, nsf.gov);</li>
		<li>org - некоммерческие организации (например, fidonet.org);</li>
		<li>net - организации, поддерживающие сети (например, nsf.net).</li>
	</ul>
	<p>В таблице представлены домены первого уровня для каждой страны.</p>

	<table border="1px" align="center">
	<tr><td colspan="6" align="center">Список географических доменных зон, их обозначение и расшифровка</td></tr>
	<tr>
		<td>
			.ac – Ascension Island <br>
			.ad – Andorra <br>
			.ae – United Arab Emirates <br>
			.af – Afghanistan <br>
			.ag – Antigua and Barbuda <br>
			.ai – Anguilla <br>
			.al – Albania <br>
			.am – Armenia <br>
			.an – Netherlands Antilles <br>
			.ao – Angola <br>
			.aq – Antarctica <br>
			.ar – Argentina <br>
			.as – American Samoa <br>
			.at – Austria <br>
			.au – Australia <br>
			.aw – Aruba <br>
			.az – Azerbaijan <br>
			.ax – Aland Islands <br>
			.ba – Bosnia and Herzegovina <br>
			.bb – Barbados <br>
			.bd – Bangladesh <br>
			.be – Belgium <br>
  			.bf – Burkina Faso <br>
			.bg – Bulgaria <br>
			.bh – Bahrain <br>
			.bi – Burundi <br>
			.bj – Benin <br>
			.bm – Bermuda <br>
			.bn – Brunei Darussalam <br>
			.bo – Bolivia <br>
			.br – Brazil <br>
			.bs – Bahamas <br>
			.bt – Bhutan <br>
			.bv – Bouvet Island <br>
			.bw – Botswana <br>
			.by – Belarus <br>
			.bz – Belize <br>
			.ca – Canada <br>
			.cc – Cocos (Keeling) Islands <br>
			.cd – Congo, The Democratic Republic of the <br>
			.cf – Central African Republic
		</td>
		<td>
			.cg – Congo, Republic of <br>
			.ch – Switzerland <br>
			.ci – Cote d’Ivoire <br>
			.ck – Cook Islands <br>
			.cl – Chile <br>
			.cm – Cameroon <br>
			.cn – China <br>
			.co – Colombia <br>
			.cr – Costa Rica <br>
			.cs – Serbia and Montenegro <br>
			.cu – Cuba <br>
			.cv – Cape Verde <br>
			.cx – Christmas Island <br>
			.cy – Cyprus <br>
			.cz – Czech Republic <br>
			.de – Germany <br>
			.dj – Djibouti <br>
			.dk – Denmark <br>
			.dm – Dominica <br>
			.do – Dominican Republic <br>
			.dz – Algeria <br>
			.ec – Ecuador <br>
			.ee – Estonia <br>
			.eg – Egypt <br>
			.eh – Western Sahara <br>
			.er – Eritrea <br>
			.es – Spain <br>
			.et – Ethiopia <br>
			.eu – European Union <br>
			.fi – Finland <br>
			.fj – Fiji <br>
			.fk – Falkland Islands (Malvinas) <br>
			.fm – Micronesia, Federal State of <br>
			.fo – Faroe Islands <br>
			.fr – France <br>
			.ga – Gabon <br>
			.gb – United Kingdom <br>
			.gd – Grenada <br>
			.ge – Georgia <br>
			.gf – French Guiana <br>
			.gg – Guernsey <br>
			.gh – Ghana <br>
			.gi – Gibraltar <br>
			.gl – Greenland
		</td>
		<td>
			.gm – Gambia <br>
			.gn – Guinea <br>
			.gp – Guadeloupe <br>
			.gq – Equatorial Guinea <br>
			.gr – Greece <br>
			.gs – South Georgia and the South Sandwich Islands <br>
			.gt – Guatemala <br>
			.gu – Guam <br>
			.gw – Guinea-Bissau <br>
			.gy – Guyana <br>
			.hk – Hong Kong <br>
			.hm – Heard and McDonald Islands <br>
			.hn – Honduras <br>
			.hr – Croatia/Hrvatska <br>
			.ht – Haiti <br>
			.hu – Hungary <br>
			.id – Indonesia <br>
			.ie – Ireland <br>
			.il – Israel <br>
			.im – Isle of Man <br>
			.in – India <br>
			.io – British Indian Ocean Territory <br>
			.iq – Iraq <br>
			.ir – Iran, Islamic Republic of <br>
			.is – Iceland <br>
			.it – Italy <br>
			.je – Jersey <br>
			.jm – Jamaica <br>
			.jo – Jordan <br>
			.jp – Japan <br>
			.ke – Kenya <br>
			.kg – Kyrgyzstan <br>
			.kh – Cambodia <br>
			.ki – Kiribati <br>
			.km – Comoros <br>
			.kn – Saint Kitts and Nevis <br>
			.kp – Korea, Democratic People’s Republic <br>
			.kr – Korea, Republic of <br>
			.kw – Kuwait <br>
			.ky – Cayman Island
		</td>
		<td>
			.kz – Kazakhstan <br>
			.la – Lao People’s Democratic Republic <br>
			.lb – Lebanon <br>
			.lc – Saint Lucia <br>
			.li – Liechtenstein <br>
			.lk – Sri Lanka <br>
			.lr – Liberia <br>
			.ls – Lesotho <br>
			.lt – Lithuania <br>
			.lu – Luxembourg <br>
			.lv – Latvia <br>
			.ly – Libyan Arab Jamahiriya <br>
			.ma – Morocco <br>
			.mc – Monaco <br>
			.md – Moldova, Republic of <br>
			.mg – Madagascar <br>
			.mh – Marshall Islands <br>
			.mk – Macedonia, The Former Yugoslav Republic of <br>
			.ml – Mali <br>
			.mm – Myanmar <br>
			.mn – Mongolia <br>
			.mo – Macau <br>
			.mp – Northern Mariana Islands <br>
			.mq – Martinique <br>
			.mr – Mauritania <br>
			.ms – Montserrat <br>
			.mt – Malta <br>
			.mu – Mauritius <br>
			.mv – Maldives <br>
			.mw – Malawi <br>
			.mx – Mexico <br>
			.my – Malaysia <br>
			.mz – Mozambique <br>
			.na – Namibia <br>
			.nc – New Caledonia <br>
			.ne – Niger <br>
			.nf – Norfolk Island <br>
			.ng – Nigeria <br>
			.ni – Nicaragua <br>
			.nl – Netherlands <br>
			.no – Norway <br>
			.np – Nepal <br>
			.nr – Nauru <br>
		</td>
		<td>
			.nu – Niue <br>
			.nz – New Zealand <br>
			.om – Oman <br>
			.pa – Panama <br>
			.pe – Peru <br>
			.pf – French Polynesia <br>
			.pg – Papua New Guinea <br>
			.ph – Philippines <br>
			.pk – Pakistan <br>
			.pl – Poland <br>
			.pm – Saint Pierre and Miquelon <br>
			.pn – Pitcairn Island <br>
			.pr – Puerto Rico <br>
			.ps – Palestinian Territories <br>
			.pt – Portugal <br>
			.pw – Palau <br>
			.py – Paraguay <br>
			.qa – Qatar <br>
			.re – Reunion Island <br>
			.ro – Romania <br>
			.ru – Russian Federation <br>
			.rw – Rwanda <br>
			.sa – Saudi Arabia <br>
			.sb – Solomon Islands <br>
			.sc – Seychelles <br>
			.sd – Sudan <br>
			.se – Sweden <br>
			.sg – Singapore <br>
			.sh – Saint Helena <br>
			.si – Slovenia <br>
			.sj – Svalbard and Jan Mayen Islands <br>
			.sk – Slovak Republic <br>
			.sl – Sierra Leone <br>
			.sm – San Marino <br>
			.sn – Senegal <br>
			.so – Somalia <br>
			.sr – Suriname <br>
			.st – Sao Tome and Principe <br>
			.su - Soviet Union <br>
			.sv – El Salvador <br>
			.sy – Syrian Arab Republic <br>
		</td>
		<td>
			.sz – Swaziland <br>
			.tc – Turks and Caicos Islands <br>
			.td – Chad <br>
			.tf – French Southern Territories <br>
			.tg – Togo <br>
			.th – Thailand <br>
			.tj – Tajikistan <br>
			.tk – Tokelau <br>
			.tl – Timor-Leste <br>
			.tm – Turkmenistan <br>
			.tn – Tunisia <br>
			.to – Tonga <br>
			.tp – East Timor <br>
			.tr – Turkey <br>
			.tt – Trinidad and Tobago <br>
			.tv – Tuvalu <br>
			.tw – Taiwan <br>
			.tz – Tanzania <br>
			.ua – Ukraine <br>
			.ug – Uganda <br>
			.uk – United Kingdom <br>
			.um – United States Minor Outlying Islands <br>
			.us – United States <br>
			.uy – Uruguay <br>
			.uz – Uzbekistan <br>
			.va – Holy See (Vatican City State) <br>
			.vc – Saint Vincent and the Grenadines <br>
			.ve – Venezuela <br>
			.vg – Virgin Islands, British <br>
			.vi – Virgin Islands, U.S. <br>
			.vn – Vietnam <br>
			.vu – Vanuatu <br>
			.wf – Wallis and Futuna Islands <br>
			.ws – Western Samoa <br>
			.ye – Yemen <br>
			.yt – Mayotte <br>
			.yu – Yugoslavia <br>
			.za – South Africa <br>
			.zm – Zambia <br>
			.zw – Zimbabwe <br>
		</td>
	</tr>
</table>

	<p>Под доменами верхнего уровня находятся домены второго уровня (часть IP-адреса, находящаяся непосредственно под доменом верхнего уровня. Например, в имени домена cisco.com название “cisco” относится к домену второго уровня под доменом верхнего уровня “com”. Домен второго уровня обычно принадлежат организациям, зарегистрировавшим доменные имена в органах регистрации доменных имен), а под ними расположены домены более низких уровней.</p>

	<center><img src="./img/chapter7/7.101.jpg"></center>
	<p class="img">Рисунок 7.101 &ndash; Иерархия системы доменных имен</p>
	<center><img src="./img/chapter7/7.102.jpg"></center>
	<p class="img">Рисунок 7.102 &ndash; Иерархия системы доменных имен. Корень структуры системы DNS</p>
    <center><img src="./img/chapter7/7.103.jpg"></center>
	<p class="img">Рисунок 7.103 &ndash; Иерархия системы доменных имен. Домен верхнего уровня</p>
	<center><img src="./img/chapter7/7.104.jpg"></center>
	<p class="img">Рисунок 7.104 &ndash; Иерархия системы доменных имен. Домен второго уровня</p>



    <p>Корневой DNS-сервер может не располагать точным адресом узла H1.cisco.com, но он имеет запись о домене верхнего уровня .com. Аналогично, на серверах домена .com также может отсутствовать запись узла H1.cisco.com, но обязательно будет иметься запись домена cisco.com. DNS-серверы в домене cisco.com имеют запись для узла H1.cisco.com и способны преобразовать адрес.</p>
    <p>Именно эта иерархия децентрализованных серверов в системе DNS отвечает за хранение и ведение записей ресурсов. Записи содержат имена доменов, которые может преобразовать сервер, а также ссылки на альтернативные серверы, которые могут также обрабатывать запросы.</p>
    <p>Имя H1.cisco.com называется полным доменными именем (FQDN) (полное доменное имя. Полная информация о местоположении узла или сервера в Интернете. В состав FQDN входят имя узла и имя домена) или DNS-именем, поскольку оно точно характеризует конкретный компьютер в иерархическом пространстве имен DNS [8].</p>

    <center><img src="./img/chapter7/7.105.jpg"></center>
	<p class="img">Рисунок 7.105 &ndash; Полное имя ресурса</p>


    <a name="ch3.3"></a>
    <p class="title">7.3.3 Преобразование имен в DNS</p>
    <p>Если узлу требуется преобразовать имя DNS, он с помощью преобразователя обращается к DNS-серверу в собственном домене. Преобразователю известен IP-адрес DNS-сервера, к которому требуется обратиться - этот адрес был предварительно настроен в составе конфигурации IP узла.</p>
    <p>Получив запрос от клиентского преобразователя, DNS-сервер сначала проверяет локальные записи DNS, хранящиеся в его кэше. Если серверу не удается преобразовать имя в IP-адрес локально, сервер с помощью собственного преобразователя пересылает запрос другому DNS-серверу, адрес которого был предварительно настроен. Этот процесс продолжается до тех пор, пока не будет получен IP-адрес. Результат преобразования имени возвращается исходному DNS-серверу, который использует его для ответа на изначально отправленный запрос.</p>
    <p>В процессе преобразования имени DNS каждый DNS-сервера кэширует, или запоминает, получаемые им ответы на запросы. Кэширование информации позволяет DNS-серверу быстрее отвечать на последующие запросы преобразователя, проверяя наличие записей в кэше перед отправкой запросов на другие DNS-серверы.</p>
    <p>DNS-серверы кэшируют информацию в течение ограниченного времени. Срок нахождения записей в кэше DNS-сервера должен быть ограничен, поскольку записи имен узлов могут время от времени изменяться. Наличие устаревшей информации в кэше DNS-сервера может привести к тому, что клиентам будут сообщаться неверные IP-адреса компьютеров.</p>

    <center><img src="./img/chapter7/7.106.jpg"></center>
	<p class="img">Рисунок 7.106 &ndash; Шаги процесса преобразования DNS</p>

    <p>Процесс преобразования доменных имен включает следующие шаги:</p>
    <p>1 Шаг.  Локальный рекурсивный запрос. Преобразователь отправляет локальному DNS-серверу рекурсивный DNS-запросы на получение IP-адреса веб-сервера. Cisco.com – полное доменное имя удаленного узла. Локальный DNS-сервер выполняет поиск сопоставления имени в своей базе данных зоны DNS и кэше и DNS. Он его не находит.</p>
    <p>2 Шаг. Итеративный запрос корневого домена. Затем локальный DNS-сервер отправляет одному из предварительно настроенных корневых серверов иатеративный DNS-запрос на получение адресов DNS-серверов, поддерживающих домен верхнего уровня “com”.корневой DNS-сервер возвращает список DNS-серверов домена верхнего уровня “.com” в своем кеше DNS.</p>
    <p>3 Шаг. Итеративный запрос домена верхнего уровня. Затем локальный DNS-сервер отправляет одному из серверов домена “.com” итеративный DNS-запрос на получение адресов DNS-серверов, управляющих доменами второго уровня “cisco.com”. Сервер домена “.com” возвращает списко DNS-серверов, поддерживающих домен второго уровня “cisco.com”. Локальный DNS-сервер сохраняет адреса DNS-серверов домена “cisco.com” в своем хэше DNS.</p>
    <p>4 Шаг. Итеративный запрос домена второго уровня. Затем локальный DNS-сервер отправляет одному из DNS-серверов домена “cisco.com” итеративный DNS-запрос на получение IP-адреса узла webserver.cisco.com. DNS-сервер домена “cisco.com” возвращает IP-адрес, сопоставленный имени webserver.cisco.com. локальный DNS-сервер сохраняет соответствующую запись ресурса в своем кэше DNS.</p>
    <p>5 Шаг. Локальный ответ. Затем локальный DNS-сервер отправляет обратно клиенту ответ с IP-адресом, соответствующим имени webserver.cisco.com. Клиент использует этот IP-адрес для подключения к удаленному веб-серверу и запрашивает веб-страницу.</p>

    <center><img src="./img/chapter7/7.107.jpg"></center>
	<p class="img">Рисунок 7.107 &ndash; Шаги процесса преобразования DNS. Шаг 1</p>
    <center><img src="./img/chapter7/7.108.jpg"></center>
	<p class="img">Рисунок 7.108 &ndash; Шаги процесса преобразования DNS. Шаг 2</p>
    <center><img src="./img/chapter7/7.109.jpg"></center>
	<p class="img">Рисунок 7.109 &ndash; Шаги процесса преобразования DNS. Шаг 3</p>
    <center><img src="./img/chapter7/7.110.jpg"></center>
	<p class="img">Рисунок 7.110 &ndash; Шаги процесса преобразования DNS. Шаг 4</p>
    <center><img src="./img/chapter7/7.111.jpg"></center>
	<p class="img">Рисунок 7.111 &ndash; Шаги процесса преобразования DNS. Шаг 5</p>



    <p>В старых реализациях DNS все записи ресурсов для узлов добавлялись и обновлялись вручную. Однако рост сетей привел к необходимости следить за все большим числом узлов, и ручное управление записями ресурсов перестало быть практичным. Кроме того, при использовании DHCP требуется еще более частое обновление записей ресурсов в зоне DNS. Для упрощения обновления информации о зонах в протокол DNS был добавлен механизм динамического обновления, позволяющий системам обновлять свои записи в зоне DNS.</p>
    <p>Динамические обновления дают возможность компьютерам DNS-клиентов регистрировать и динамически обновлять свои записи ресурсов на DNS-сервере при каждом изменении. Для использования динамического обновления (DNS-процесс, который автоматически обновляет записи в среде Windows Server) DNS-сервер и DNS-клиенты (или DHCP-сервер) должны поддерживать функцию динамического обновления. Динамические обновления на DNS-сервере по умолчанию отключены и должны быть включены в явном виде. Поддержка динамических обновлений имеется в текущих версиях операционных систем.</p>
    <p>Существуют следующие функции динамического обновления.</p>
    <p>1 Обновление записи узла клиентом. DHCP-клиенты, способные динамически обновлять свои DNS-записи узлов, делают следующее [8].</p>
    <ul type="square">
        <li>Клиент запрашивает адрес у DHCP-сервера.</li>
        <li>DHCP-сервер назначает клиенту IP-адрес.</li>
        <li>DHCP-сервер регистрирует DNS-запись узла с помощью настроенного DNS-сервера от имени клиента.</li>
        <li>DHCP-сервер регистрирует имя указателя (PTR) для клиента.</li>
    </ul>
    <p>2 Обновление записи узла службой DHCP. Некоторые более старые операционные системы не поддерживают динамическое обновление DNS. Для таких операционных систем некоторые DHCP-серверы можно настроить на динамическое обновление DNS от имени клиента. Ниже описан процесс использования DHCP для обновления DNS клиента.</p>
    <ul type="square">
        <li>Клиент запрашивает адрес у DHCP-сервера.</li>
        <li>DHCP-сервер назначает клиенту IP-адрес.</li>
        <li>DHCP-сервер регистрирует DNS-запись узла с помощью настроенного DNS-сервера от имени клиента.</li>
        <li>DHCP-сервер регистрирует имя указателя (PTR) для клиента.</li>
    </ul>

    <center><img src="./img/chapter7/7.112.jpg"></center>
	<p class="img">Рисунок 7.112 &ndash; Функции динамического обновления. Обновление записи узла клиентом</p>
    <center><img src="./img/chapter7/7.113.jpg"></center>
	<p class="img">Рисунок 7.113 &ndash; Функции динамического обновления. Обновление записи узла службой DHCP</p>



    <p>DNS-серверы ведут базу данных зон для определенной части общей иерархии DNS. Записи ресурса хранятся в соответствующей зоне DNS.</p>
    <p>Зоны DNS могут относиться к одной из двух категорий: зоны просмотра вперед и зоны просмотра назад. Другой способ классификации делит зоны просмотра вперед и назад на основные и дополнительные. Зоны различных типов выполняют разные функции в общей инфраструктуре DNS.</p>
    <p>1 Зоны просмотра вперед. Зона просмотра вперед (вид поиска в DNS, используемый для преобразования доменного имени Интернет ресурса в IP-адрес. Адрес веб-сайта, введенный в браузере, преобразуется в IP-адрес, по которому маршрутизаторы могут передать запрос искомому веб-среверу)- стандартная зона DNS, используемая для преобразования полных доменных имен в IP-адреса. Этот тип зон наиболее часто используется при работе в Интернете. Для соединения с указанным в обозревателе адресом веб-сайта, например www.cisco.com, локальному DNS-серверу отсылается рекурсивный запрос для преобразования имени сайта в IP-адрес.</p>
    <p>2 Зоны просмотра назад. Зона просмотра назад (процесс определения имени узла, связанного с указанным IP-адресом или адресом узла) - особый тип зоны, позволяющий преобразовывать IP-адрес в полное доменное имя. Некоторые приложения используют обратный поиск для идентификации систем, которые активно с ними взаимодействуют. В Интернете существует полная DNS-иерархия обратного поиска, позволяющая преобразовать любой публично зарегистрированный IP-адрес. Во многих частных сетях реализованы собственные локальные зоны просмотра назад для идентификации компьютерных систем в пределах частной сети. Для обратного поиска имен по IP-адресам можно использовать команду ping -a [ip_адрес].</p>
    <p>3 Основные зоны. Основной зоной DNS называется зона, которая может быть изменена. Когда необходимо добавить новую запись ресурса либо обновить или удалить существующую запись, требуется изменить основную зону DNS. Если на DNS-сервере есть основная зона, говорят, что такой сервер является полномочным для этой зоны DNS, так как в нем содержится ответ на DNS-запросы записей в данной зоне. Для заданного домена DNS может быть только одна основная зона DNS, однако могут быть основные зоны просмотра вперед или назад.</p>
    <p>4 Дополнительные зоны. Дополнительная зона является резервной зоной только для чтения, которая поддерживается на DNS-сервере, отличном от того, на котором находится основная зона. Дополнительная зона является копией основной зоны, которая с помощью передачи зон получает от первичного сервера обновленную информацию о зоне. Поскольку дополнительная зона является копией зоны только для чтения, все обновления записей необходимо выполнить в соответствующей основной зоне. Дополнительные зоны могут быть для зон просмотра вперед или назад. В зависимости от требований к доступности зоны DNS может быть много дополнительных зон DNS, распределенных на нескольких DNS-серверах [11].</p>

    <center><img src="./img/chapter7/7.114.jpg"></center>
	<p class="img">Рисунок 7.114 &ndash; Пример зоны DNS просмотра вперед</p>
    <center><img src="./img/chapter7/7.115.jpg"></center>
	<p class="img">Рисунок 7.115 &ndash; Пример зоны DNS просмотра назад</p>


    <a name="ch3.4"></a>
    <p class="title">7.3.4 Реализация DNS-решений</p>
    <p>Существует несколько способов реализации DNS-решений.</p>
    <p>1 Использование DNS-серверов ISP. ISP обычно применяют только кэширующие DNS-серверы. Эти серверы настроены так, чтобы все запросы для преобразования имен в адреса передавались корневым серверам в Интернете. Результаты кэшируются и используются при ответе на последующие запросы. Поскольку ISP имеют много клиентов, число кэшируемых запросов DNS будет высоким. Большой кэш снижает нагрузку на сеть за счет того, что пересылать запросы DNS корневым серверам требуется реже. Серверы, работающие только в режиме кэширования, не работают с официальной информацией зоны, т.е. их база данных не является основным источником данных о привязке имен к IP-адресам.</p>
    <p>2 Использование локальных DNS-серверов. Предприятие может поддерживать собственный DNS-сервер. Настройки клиентских компьютеров в сети будут указывать на локальный DNS-сервер, а не на DNS-сервер ISP. На локальном DNS-сервере могут содержаться официальные записи зоны для привязки имен к IP-адресам узлов в этой зоне. Те из полученных запросов, которые не могут быть обработаны DNS-сервером, передаются следующему серверу. Кэш локального сервера имеет небольшой объем по сравнению с кэшем DNS-сервера ISP, поскольку локальный DNS-сервер обрабатывает меньше запросов.</p>
    <p>Локальные DNS-серверы можно настроить так, чтобы запросы пересылались непосредственно корневому DNS-серверу. Однако некоторые администраторы настраивают локальный DNS-сервер на пересылку всех запросов вышестоящему DNS-серверу, например DNS-серверу ISP. Благодаря этому локальный DNS-сервер может пользоваться крупным кэшем DNS-сервера ISP, не проходя полной процедуры поиска от корневого сервера.</p>

    <center><img src="./img/chapter7/7.116.jpg"></center>
	<p class="img">Рисунок 7.116 &ndash; Реализация DNS-решений</p>

    <p>Потеря доступа к DNS-серверам сказывается на возможности использования внешних ресурсов. Если введенное пользователем доменное имя не удается преобразовать, ресурс становится недоступен. Поэтому организация, регистрирующая доменное имя в Интернете, должна указать не менее двух DNS-серверов. На этих серверах размещается база данных зоны DNS. Избыточная конфигурация DNS-серверов позволяет использовать для преобразования имен запасной DNS-сервер в случае отказа основного. Этот прием обеспечивает отказоустойчивость. Хотя требуются всего два сервера, при наличии ресурсов можно предусмотреть дополнительные DNS-серверы для укрепления защиты и более эффективной организации серверов.</p>
    <p>Несколько DNS-серверов с информацией о зоне целесообразно размещать в различных физических сетях. Например, первичные данные зоны DNS могут храниться на DNS-сервере в локальном помещении предприятия. Обычно ISP размещает дополнительный вторичный DNS-сервер у себя для гарантии отказоустойчивости.</p>
    <p>DNS - критически важная сетевая служба, поэтому для защиты DNS-серверов должны быть предусмотрены межсетевые экраны и другие меры безопасности. Отказ DNS не должен приводить к потере доступности других сетевых сервисов.</p>

    <center><img src="./img/chapter7/7.117.jpg"></center>
	<p class="img">Рисунок 7.117 &ndash; Использование внешних и внутренних DNS-серверов</p>

    <a name="ch4"></a>
    <p class="title">7.4 Службы и протоколы</p>
    <a name="ch4.1"></a>
    <p class="title">7.4.1 Сервисы</p>

    <p>Помимо подключения к сети и доступа к службе DNS, предлагаемых всем клиентам, ISP предлагают ряд дополнительных сервисов, ориентированных на бизнес. Эти сервисы реализуются программным обеспечением, установленным на серверах. В их числе:</p>
    <ul type="square">
        <li>размещение серверов электронной почты;</li>
        <li>размещение веб-сайтов (веб-хостинг);</li>
        <li>организация сайтов для электронной коммерции;</li>
        <li>хранение и передача файлов;</li>
        <li>форумы и веб-журналы;</li>
        <li>потоковая передача аудио- и видеоматериалов.</li>
    </ul>
    <p>Такое многообразие служб и приложений реализуется ISP на основе протоколов TCP/IP прикладного уровня. Наиболее распространенными из протоколов TCP/IP прикладного уровня являются HTTP, FTP, SMTP, POP3 (протокол почтового ящика версии 3. Интернет-стандарт прикладного уровня, позволяющий пользователям получать электронную почту с удаленного сервера по соединению TCP/IP) и IMAP4 (протокол доступа к сообщениям в Интернете 4. Протокол прикладного уровня, позволяющий локальному клиенту получать доступ к электронной почте на удаленном сервере в Интернете. Сообщения загружаются клиентом, но хранятся на сервере. IMAP4 - это обновленная версии протокола IMAP).</p>
    <p>Некоторые клиенты предъявляют повышенные требования к безопасности, и для них разработаны защищенные протоколы прикладного уровня, такие как FTPS (защищенный протокол передачи файлов. Протокол FTP с защитой посредством SSL-шифрования. В протоколе FTPS используются функции шифрования, контроля и управления, обеспечивающие надежную и защищенную передачу файлов) и HTTPS (протокол защищенной передачи гипертекста. Протокол защищенной передачи файлов через Интернет с возможностью шифрования посредством SSL (защиты на уровне сокетов) и другими функциями безопасности, дополняющими возможности протокола передачи гипертекста).</p>

    <center><img src="./img/chapter7/7.118.jpg"></center>
	<p class="img">Рисунок 7.118 &ndash; Сервисы провайдеров услуг Интернета</p>


    <a name="ch4.2"></a>
    <p class="title">7.4.2 Протоколы HTTP и HTTPS</p>
    <p>Протокол HTTP входит в состав семейства протоколов TCP/IP. Изначально он был разработан для загрузки веб-страниц с HTML-разметкой. Сейчас он используется для распределенной совместной работы с информацией. По мере развития появилось несколько версий протокола HTTP. Сейчас большинство ISP для размещения веб-сайтов использует протокол HTTP версии 1.1. В отличие от прежних версий, эта версия позволяет организовать несколько сайтов на одном веб-сервере и использовать постоянные соединения для поточной обработки нескольких запросов и откликов.</p>
    <p>Протокол HTTP использует механизм “запрос-отклик”. Протокол HTTP определяет типы сообщений, отправляемых клиентом (обычно веб-обозревателем) серверу при запросе веб-страницы. В протоколе также определены типы сообщений с откликом сервера.</p>
    <p>Несмотря на исключительную гибкость, протокол HTTP не является защищенным. Сообщения запроса передаются серверу открытым текстом, который может быть перехвачен и прочитан. Отклики от сервера, обычно представляющие собой HTML-страницы, также передаются в незашифрованном виде.</p>
    <p>Для защищенного двустороннего обмена данными с веб-серверами в Интернете разработана защищенная модификация протокола HTTP (HTTPS). HTTPS позволяет использовать аутентификацию и шифрование для защиты данных, пересылаемых между клиентом и сервером. HTTPS определяют дополнительные правила передачи данных между прикладным и транспортным уровнями [10].</p>

    <center><img src="./img/chapter7/7.119.jpg"></center>
	<p class="img">Рисунок 7.119 &ndash; Работа протокола HTTP</p>

    <p>При соединении с HTTP-сервером для загрузки веб-страницы местонахождение сервера и конкретного ресурса указывается универсальным идентификатором ресурса (URL). В URL содержится следующая информация:</p>
    <ul type="square">
        <li>используемый протокол;</li>
        <li>имя домена сервера, к которому производится обращение;</li>
        <li>местонахождение ресурса на сервере, например http://example.com/example1/index.htm. </li>
    </ul>
    <p>Многие приложения веб-серверов позволяют указывать URL-адреса в укороченной форме. Такие адреса получили широкое распространение благодаря тому, что их проще записывать, запоминать и обмениваться ими. При использовании короткого URL-адреса указанный адрес заменяется страницей ресурса по умолчанию. Если пользователь указал URL в короткой форме, например http://example.com, пользователю фактически передается страница по умолчанию: http://example.com/example1/index.htm. </p>

    <center><img src="./img/chapter7/7.120.jpg"></center>
	<p class="img">Рисунок 7.120 &ndash; Адрес URL</p>
    <center><img src="./img/chapter7/7.121.jpg"></center>
	<p class="img">Рисунок 7.121 &ndash; Адрес URL. Протокол</p>
    <center><img src="./img/chapter7/7.122.jpg"></center>
	<p class="img">Рисунок 7.122 &ndash; Адрес URL. Имя домена</p>
    <center><img src="./img/chapter7/7.123.jpg"></center>
	<p class="img">Рисунок 7.123 &ndash; Адрес URL. Папка на сервере</p>
    <center><img src="./img/chapter7/7.124.jpg"></center>
	<p class="img">Рисунок 7.124 &ndash; Адрес URL. Ресурс </p>



    <p>HTTP поддерживает прокси-серверы (соединение, обеспечиваемое сервером, работающим в качестве дублирующего для другого сервера. Клиент подключается к прокси-серверу и запрашивает у него ресурсы, расположенные на другом сервере), позволяющие клиентам устанавливать соединения с другими сетевыми устройствами через посредника. Прокси-сервер - это устройство в цепочке передачи данных, которое выступает сервером по отношению к клиенту и клиентом по отношению к серверу.</p>
    <p>Клиент подключается к прокси-серверу и запрашивает у него ресурс, расположенный на другом сервере. Прокси-сервер подключается к указанному серверу и получает у него запрошенный ресурс, который затем возвращает клиенту.</p>
    <p>Прокси-сервер может кэшировать полученную страницу или ресурс в течение настраиваемого периода времени. Благодаря кэшированию клиенты в дальнейшем смогут быстрее получать доступ к веб-странице, поскольку обращаться к серверу, на котором физически находится страница, не потребуется. Прокси-серверы используются по трем причинам:</p>
    <ul type="square">
        <li>Скорость - кэширование позволяет сделать ресурсы, запрошенные одним пользователем, доступными другим пользователям, не обращаясь повторно к серверу, на котором фактически находится страница.</li>
        <li>Безопасность - прокси-серверы способны перехватывать компьютерные вирусы (вредоносная программа или код, который может самопроизвольно распространяться и заражать компьютеры без уведомления и разрешения пользователя. Некоторые вирусы не наносят вреда компьютеру, в то время как другие могут повредить или удалить операционную систему и файлы данных. Компьютерный вирус также известен как вирус) и другие вредоносные объекты, не пересылая их клиентам.</li>
        <li>Фильтрация - прокси-серверы могут просматривать входящие HTTP-сообщения и фильтровать контент неприемлемого или непристойного содержания.</li>
    </ul>

    <center><img src="./img/chapter7/7.125.jpg"></center>
	<p class="img">Рисунок 7.125 &ndash; Работа прокси-серверов</p>
    <p>В HTTP обмен сообщениями между клиентом и сервером осуществляется открытым текстом. Такие текстовые сообщения не защищены от несанкционированного перехвата. Для защиты данных, особенно конфиденциальной информации, многие ISP предлагают защищенные веб-сервисы, использующие протокол HTTPS (HTTP с протоколом SSL для шифрования на уровне сокетов). В HTTPS используется тот же процесс “запрос-отклик”, что и в HTTP, но поток данных зашифровывается посредством SSL перед передачей по сети.</p>
    <p>При поступлении на сервер поток данных HTTP переходит с уровня TCP на прикладной уровень сервера, где он расшифровывается посредством SSL.</p>
    <p>При использовании HTTPS сервер способен поддерживать меньшее число одновременных соединений, чем при использовании HTTP. HTTPS создает дополнительную нагрузку и требует более длительной обработки на сервере из-за необходимости шифрования и расшифровки трафика. Чтобы поддерживать производительность сервера на требуемом уровне, протокол HTTPS следует использовать только в случае необходимости, например при обмене конфиденциальной информацией.</p>

    <center><img src="./img/chapter7/7.126.jpg"></center>
	<p class="img">Рисунок 7.126 &ndash; Работа протокола HTTPS</p>


    <a name="ch4.3"></a>
    <p class="title">7.4.3 Протокол FTP</p>
    <p>FTP - протокол с установлением соединения, в котором обмен данными между процессами FTP-клиента и сервера осуществляется по TCP-соединению. Реализация FTP предусматривает разделение функций между интерпретатором протоколов (PI) (интерпретатор протоколов. Управляющее соединение между FTP-клиентом и FTP-сервером. PI устанавливает TCP-соединение и передает управляющую информацию серверу) и процессом передачи данных (DTP) (процесс передачи данных. Метод, устанавливающий соединение для передачи данных и управляющий им). При передаче файлов PI и DTP существуют параллельно как два взаимодействующих процесса. В результате протокол FTP требует установления двух соединений между клиентом и сервером: одно соединение используется для передачи управляющей информации и команд, а второе — для непосредственной передачи содержимого файлов.</p>
    <p>1 Интерпретатор протокола (PI). PI играет роль основного управляющего соединения между FTP-клиентом и FTP-сервером. Он устанавливает TCP-соединение и передает управляющую информацию серверу. К управляющей информации относятся команды, используемые, в частности, для перемещения по иерархии каталогов, переименования и переноса файлов. Управляющее соединение, или управляющий поток, остается открытым до закрытия пользователем. Процедура подключения пользователя к FTP-серверу состоит из пяти этапов:</p>
    <p>1 Шаг. Пользовательский PI отправляет запрос соединения серверному PI на известный порт 21.</p>
    <p>2 Шаг. Серверный PI возвращает отклик, и соединение считается установленным.</p>
    <p>3 Шаг. После открытия управляющего TCP-соединения серверный PI начинает выполнять последовательность входа в систему.</p>
    <p>4 Шаг. Пользователь вводит учетные данные с помощью пользовательского интерфейса и проходит аутентификацию.</p>
    <p>5 Шаг. После этого начинается процесс передачи данных.</p>
    <p>2 Процесс передачи данных. DTP - отдельная функция передачи данных. Эта функция при водится в действие только в том случае, если пользователь в явном виде запрашивает передачу файлов на FTP-сервер или с FTP-сервера. В отличие от соединения PI, которое остается открытым постоянно, соединение DTP автоматически закрывается по завершении передачи файла.</p>

    <center><img src="./img/chapter7/7.127.jpg"></center>
	<p class="img">Рисунок 7.127 &ndash; Работа протокола FTP</p>

    <p>FTP поддерживает установление соединений для передачи данных в двух режимах: активном и пассивном.</p>
    <p>1 Активные соединения для передачи данных. В активном соединении для передачи данных клиент инициирует запрос к серверу и открывает порт для ожидаемых данных. Непосредственный процесс передачи данных начинается после того, как сервер подключится к клиенту на этом порту.</p>
    <p>2 Пассивные соединения для передачи данных. В данном случае FTP-сервер открывает произвольный порт источника (с номером выше 1023). Сервер пересылает свой IP-адрес и номер этого произвольного порта FTP-клиенту в управляющем потоке. Затем сервер ожидает подключения к нему FTP-клиента, чтобы начать передачу файла.</p>
    <p>Поставщики услуг Интернета обычно поддерживают пассивные подключения к своим FTP-серверам. Межсетевые экраны часто не допускают установления активных FTP-соединений с узлами во внутренней сети.</p>

    <center><img src="./img/chapter7/7.128.jpg"></center>
	<p class="img">Рисунок 7.128 &ndash; Активное соединение для передачи данных</p>
    <center><img src="./img/chapter7/7.129.jpg"></center>
	<p class="img">Рисунок 7.129 &ndash; Пассивное соединение для передачи данных</p>


    <a name="ch4.4"></a>
    <p class="title">7.4.4 SMTP, POP3, и IMAP4</p>
    <p>Один из основных сервисов, предлагаемых ISP — размещение серверов электронной почты. Электронная почта — это набор средств для доставки, хранения и извлечения электронных сообщений в сети. Сообщения электронной почты хранятся на серверах электронной почты в базах данных. Поставщики услуг Интернета часто устанавливают у себя серверы электронной почты, содержащие учетные записи множества клиентов.</p>
    <p>Клиенты электронной почты для отправки и получения сообщений обращаются к серверам электронной почты. Серверы электронной почты взаимодействуют с другими серверами электронной почты для обмена сообщениями между доменами. Почтовый клиент не соединяется непосредственно с другим почтовым клиентом для отправки сообщения. Оба клиента должны доверить транспортировку сообщений серверу электронной почты. Это верно даже в том случае, если оба пользователя находятся в одном домене.</p>
    <p>Клиенты электронной почты отправляют сообщения на сервер, указанный в настройках приложения. Получив сообщение, сервер проверяет, присутствует ли указанный в нем домен получателя в локальной базе данных сервера. Если домен отсутствует в базе данных, сервер отправляет запрос DNS для определения сервера электронной почты в домене получателя. Как только становится известен IP-адрес сервера электронной почты получателя, сообщение пересылается на соответствующий сервер.</p>
    <p>Электронная почта может быть реализована с использованием трех самостоятельных протоколов: SMTP, POP3 и IMAP4. Процесс прикладного уровня, пересылающий сообщения от клиента на сервер или между серверами, реализует протокол SMTP. Клиент получает сообщения с сервера с помощью одного из двух протоколов прикладного уровня: POP3 или IMAP.</p>

    <center><img src="./img/chapter7/7.130.jpg"></center>
	<p class="img">Рисунок 7.130 &ndash; Работа почтовых протоколов</p>

    <p>Функции, реализуемые упрощенным протоколом передачи электронной почты (SMTP), обеспечивают надежную и эффективную доставку сообщений. Для нормальной работы SMTP-приложения требуются, чтобы почтовые сообщения были правильно отформатированы, а на клиенте и на сервере должны быть загружены процессы SMTP.</p>
    <p>В формате SMTP сообщение состоит из заголовка и тела сообщения. В то время как тело сообщения может содержать текст произвольной длины, заголовок должен содержать адреса электронной почты получателя и отправителя в правильном формате. Все другие элементы заголовка являются необязательными.</p>
    <p>Когда клиент отправляет сообщение по электронной почте, процесс SMTP клиента подключается к процессу SMTP сервера на известном порту 25. Установив соединение, клиент пытается отправить по нему сообщение серверу. Как только сервер получит сообщение, он помещает его в очередь сообщений локальной учетной записи или пересылает другому серверу, выполняя такой же процесс установления SMTP-соединения.</p>
    <p>Целевой сервер электронной почты в момент доставки сообщения может оказаться недоступен или перегружен. На этот случай в SMTP предусмотрено временное хранение сообщений с последующей повторной отправкой. Периодически сервер проверяет очередь сообщений и пытается отправить их повторно. Если сообщение не удается доставить в течение установленного времени, оно возвращается отправителю с уведомлением о невозможности доставки.</p>
    <center><img src="./img/chapter7/7.131.jpg"></center>
	<p class="img">Рисунок 7.131 &ndash; Использование протокола SMTP для передачи электронной почты. Часть 1</p>
    <center><img src="./img/chapter7/7.132.jpg"></center>
	<p class="img">Рисунок 7.132 &ndash; Использование протокола SMTP для передачи электронной почты. Часть 2</p>
    <center><img src="./img/chapter7/7.133.jpg"></center>
	<p class="img">Рисунок 7.133 &ndash; Использование протокола SMTP для передачи электронной почты. Часть 3</p>
    <center><img src="./img/chapter7/7.134.jpg"></center>
	<p class="img">Рисунок 7.134 &ndash; Использование протокола SMTP для передачи электронной почты. Часть 4</p>
    <center><img src="./img/chapter7/7.135.jpg"></center>
	<p class="img">Рисунок 7.135 &ndash; Использование протокола SMTP для передачи электронной почты. Часть 5</p>
    <center><img src="./img/chapter7/7.136.jpg"></center>
	<p class="img">Рисунок 7.136 &ndash; Использование протокола SMTP для передачи электронной почты. Часть 6</p>


    <p>Одним из обязательных полей в заголовке сообщения является адрес электронной почты получателя. Адрес электронной почты состоит из имени или псевдонима учетной записи, а также имени домена почтового сервера. </p>
    <p>Пример адреса электронной почты: poluchatel@cisco.com.</p>
    <p>Символ “@” разделяет в адресе имя учетной записи и имя домена сервера. При отправке сообщения на адрес poluchatel@cisco.com имя домена отправляется DNS-серверу для получения IP-адреса сервера электронной почты, обслуживающего данный домен.</p>
    <p>При отправке сообщения на адрес poluchatel@cisco.com имя домена отправляется DNS-серверу для получения IP-адреса сервера электронной почты, обслуживающего данный домен. Серверы электронной почты в DNS помечены индикатором записи MX. Индикатор записи MX обозначает тип записи ресурса, которая хранится на сервере DNS. Получив сообщение, сервер-адресат помещает его в почтовый ящик соответствующего пользователя. Местоположение почтового ящика определяется исходя из учетной записи, указанной в первой части адреса электронной почты. В данном случае это учетная запись “recipient”. Сообщение остается в почтовом ящике до тех пор, пока получатель не подключится к серверу и не заберет сообщение.</p>
    <p>Если сервер электронной почты получает сообщение для несуществующей учетной записи, он возвращает сообщение отправителю с уведомлением о невозможности доставки.</p>

    <center><img src="./img/chapter7/7.137.jpg"></center>
	<p class="img">Рисунок 7.137 &ndash; Адрес электронной почты</p>
    <center><img src="./img/chapter7/7.138.jpg"></center>
	<p class="img">Рисунок 7.138 &ndash; Адрес электронной почты. Имя учетной записи</p>
    <center><img src="./img/chapter7/7.139.jpg"></center>
	<p class="img">Рисунок 7.139 &ndash; Адрес электронной почты. Имя домена почтового сервера</p>


    <p>Протокол работы с почтовым ящиком версии 3 (POP3) позволяет рабочим станциям получать сообщения электронной почты с серверов электронной почты. При использовании POP3 сообщения загружаются клиентом с сервера и удаляются на сервере.</p>
    <p>Сетевая служба POP3 на сервере пассивно ожидает запросов подключения клиентов к TCP-порту 110. Для использования этой сетевой службы клиент запрашивает TCP-соединение с сервером. После установки соединения сервер POP3 посылает приветствие. Затем клиент и сервер POP3 обмениваются командами и откликами, пока подключение не будет закрыто или прервано.</p>
    <p>Так как сообщения электронной почты загружаются клиентом и удаляются с сервера, это означает, что они не хранятся централизованно. По этой причине протокол POP3 нецелесообразен в решении для малого бизнеса с централизованным резервным копированием.</p>
    <p>Протокол POP3 подходит ISP, поскольку он снимает с ISP ответственность за хранение большого объема данных на серверах электронной почты.</p>

    <center><img src="./img/chapter7/7.140.jpg"></center>
	<p class="img">Рисунок 7.140 &ndash; Обмен пакетами протокола POP3 между клиентами и серверами. Часть 1</p>
    <center><img src="./img/chapter7/7.141.jpg"></center>
	<p class="img">Рисунок 7.141 &ndash; Обмен пакетами протокола POP3 между клиентами и серверами. Часть 2</p>
    <center><img src="./img/chapter7/7.142.jpg"></center>
	<p class="img">Рисунок 7.142 &ndash; Обмен пакетами протокола POP3 между клиентами и серверами. Часть 3</p>
    <center><img src="./img/chapter7/7.143.jpg"></center>
	<p class="img">Рисунок 7.143 &ndash; Обмен пакетами протокола POP3 между клиентами и серверами. Часть 4</p>
    <center><img src="./img/chapter7/7.144.jpg"></center>
	<p class="img">Рисунок 7.144 &ndash; Обмен пакетами протокола POP3 между клиентами и серверами. Часть 5</p>


    <p>Протокол доступа к сообщениям в Интернете (IMAP4) предусматривает другой метод извлечения почтовых сообщений с сервера. Его отличие от POP3 состоит в том, что при подключении пользователя к серверу IMAP в клиентское приложение загружаются только копии сообщений. Исходные сообщения остаются на сервере до тех пор, пока они не будут удалены вручную. Пользователи просматривают копии сообщений в клиентах электронной почты.</p>
    <p>Пользователи могут организовать на сервере иерархическую файловую структуру для упорядочения и хранения почты. Эта структура также дублируется клиентом электронной почты. Если пользователь решает удалить сообщение, оно синхронно удаляется из клиента и с сервера.</p>
    <p>Малым и средним предприятиям протокол IMAP предоставляет множество преимуществ. IMAP обеспечивает долгосрочное хранение почтовых сообщений на серверах электронной почты и их централизованное резервное копирование. Он также позволяет сотрудникам работать с сообщениями из любого места, используя различные устройства и клиентское ПО. Привычная для пользователя структура папок почтового ящика не зависит от того, каким образом пользователь обращается к почтовому ящику.</p>
    <p>Для ISP протокол IMAP, возможно, не является лучшим выбором. Могут потребоваться существенные затраты на приобретение и обслуживание крупных дисковых хранилищ для большого объема корреспонденции. Кроме того, если клиенты требуют регулярного резервного копирования своих почтовых ящиков, затраты ISP возрастут еще сильнее.</p>

    <center><img src="./img/chapter7/7.145.jpg"></center>
	<p class="img">Рисунок 7.145 &ndash; Обмен пакетами протокола IMAP4 между клиентами и серверами. Часть 1</p>
    <center><img src="./img/chapter7/7.146.jpg"></center>
	<p class="img">Рисунок 7.146 &ndash; Обмен пакетами протокола IMAP4 между клиентами и серверами. Часть 2</p>
    <center><img src="./img/chapter7/7.147.jpg"></center>
	<p class="img">Рисунок 7.147 &ndash; Обмен пакетами протокола IMAP4 между клиентами и серверами. Часть 3</p>
    <center><img src="./img/chapter7/7.148.jpg"></center>
	<p class="img">Рисунок 7.148 &ndash; Обмен пакетами протокола IMAP4 между клиентами и серверами. Часть 4</p>
    <center><img src="./img/chapter7/7.149.jpg"></center>
	<p class="img">Рисунок 7.149 &ndash; Обмен пакетами протокола IMAP4 между клиентами и серверами. Часть 5</p>
    <center><img src="./img/chapter7/7.150.jpg"></center>
	<p class="img">Рисунок 7.150 &ndash; Обмен пакетами протокола IMAP4 между клиентами и серверами. Часть 6</p>

    <p class="title">Контрольные вопросы для закрепления изученного материала</p>
<ol>
<li> Перечислите основные уровни и протоколы стека TCP/IP.</li>
<li> Назовите функции транспортного уровня.</li>
<li> Укажите, в чем отличие работы протоколов TCP и UDP?</li>
<li>Расскажите об иерархической структуре системы доменных имен DNS.</li>
<li>Укажите нумерацию портов основных служб и протоколов прикладного уровня стека TCP/IP.</li>
</ol>

</BODY>
</HTML>